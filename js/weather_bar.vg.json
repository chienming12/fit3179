{
    "$schema": "https://vega.github.io/schema/vega/v5.json",
    "title": "Number of cases according to Weather Conditions",
    "width": 800,
    "height": 300,
    "padding": 5,

    "data": [{
        "name": "usdata",
        "values": [
            { "category": "Fair", "amount": 1107194 },
            { "category": "Mostly Cloudy", "amount": 363959 },
            { "category": "Cloudy", "amount": 348767 },
            { "category": "Partly Cloudy", "amount": 249939 },
            { "category": "Clear", "amount": 173823 },
            { "category": "Light Rain", "amount": 128403 },
            { "category": "Overcast", "amount": 84882 },
            { "category": "Scattered Clouds", "amount": 45132 },
            { "category": "Light Snow", "amount": 43752 },
            { "category": "Fog", "amount": 41226 },
            { "category": "Haze", "amount": 36354 },
            { "category": "Rain", "amount": 31044 }
        ]
    }],

    "signals": [{
        "name": "tooltip",
        "value": {},
        "on": [
            { "events": "rect:mouseover", "update": "datum" },
            { "events": "rect:mouseout", "update": "{}" }
        ]
    }],

    "scales": [{
            "name": "xscale",
            "type": "band",
            "domain": { "data": "usdata", "field": "category" },
            "range": "width",
            "padding": 0.05,
            "round": true
        },
        {
            "name": "yscale",
            "domain": { "data": "usdata", "field": "amount" },
            "nice": true,
            "range": "height"
        }
    ],

    "axes": [
        { "orient": "bottom", "scale": "xscale" },
        { "orient": "left", "scale": "yscale" }
    ],

    "marks": [{
            "type": "rect",
            "from": { "data": "usdata" },
            "encode": {
                "enter": {
                    "x": { "scale": "xscale", "field": "category" },
                    "width": { "scale": "xscale", "band": 1 },
                    "y": { "scale": "yscale", "field": "amount" },
                    "y2": { "scale": "yscale", "value": 0 }
                },
                "update": {
                    "fill": { "value": "steelblue" }
                },
                "hover": {
                    "fill": { "value": "red" }
                }
            }
        },
        {
            "type": "text",
            "encode": {
                "enter": {
                    "align": { "value": "center" },
                    "baseline": { "value": "bottom" },
                    "fill": { "value": "#333" }
                },
                "update": {
                    "x": { "scale": "xscale", "signal": "tooltip.category", "band": 0.5 },
                    "y": { "scale": "yscale", "signal": "tooltip.amount", "offset": -2 },
                    "text": { "signal": "tooltip.amount" },
                    "fillOpacity": [
                        { "test": "datum === tooltip", "value": 0 },
                        { "value": 1 }
                    ]
                }
            }
        }
    ]
}